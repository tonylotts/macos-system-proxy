#!/usr/bin/env bash

network_service=$1
secure=$2

function stat_param {
  secure=$1
  case $secure in
    true)
      echo '-getsecurewebproxy'
      ;;
    *)
      echo '-getwebproxy'
      ;;
  esac
}

function stat_command {
  param=$1
  echo "networksetup $param $network_service"
}

function enabled {
  echo "$1 | grep -qe '^Enabled: Yes'"
}

param=$(stat_param "$secure")
sc=$(stat_command "$param")
command=$(enabled "$sc")

eval "$command"
